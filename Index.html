// App.jsx
import React, { useState } from 'react';
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Tabs, TabsList, TabsTrigger, TabsContent } from "@/components/ui/tabs";
import { CheckCircle, Search } from "lucide-react";

const recipes = [
  {
    id: 1,
    title: "Pancakes",
    ingredients: ["Flour", "Eggs", "Milk", "Baking Powder", "Salt"],
    steps: ["Mix ingredients", "Heat pan", "Pour batter", "Flip when bubbles", "Serve hot"]
  },
  {
    id: 2,
    title: "Spaghetti Bolognese",
    ingredients: ["Spaghetti", "Minced Meat", "Tomato Sauce", "Onion", "Garlic"],
    steps: ["Cook pasta", "Sauté onion and garlic", "Add meat", "Add sauce", "Simmer and serve"]
  }
];

export default function App() {
  const [search, setSearch] = useState("");
  const [checkedSteps, setCheckedSteps] = useState({});

  const handleCheck = (recipeId, stepIndex) => {
    setCheckedSteps(prev => ({
      ...prev,
      [recipeId]: {
        ...(prev[recipeId] || {}),
        [stepIndex]: !((prev[recipeId] || {})[stepIndex])
      }
    }));
  };

  const filteredRecipes = recipes.filter(recipe =>
    recipe.title.toLowerCase().includes(search.toLowerCase())
  );

  return (
    <main className="min-h-screen bg-pink-50 p-6 font-sans">
      <h1 className="text-4xl font-bold text-pink-600 mb-6 text-center">🍓 Cute Recipe App</h1>

      <Tabs defaultValue="home" className="max-w-2xl mx-auto">
        <TabsList className="grid grid-cols-3 bg-pink-100 rounded-xl mb-4">
          <TabsTrigger value="home">Home</TabsTrigger>
          <TabsTrigger value="search">Search</TabsTrigger>
          <TabsTrigger value="checklist">Checklist</TabsTrigger>
        </TabsList>

        <TabsContent value="home">
          <div className="space-y-4">
            {recipes.map(recipe => (
              <Card key={recipe.id} className="rounded-2xl shadow-md">
                <CardContent className="p-4">
                  <h2 className="text-xl font-semibold text-pink-700">{recipe.title}</h2>
                  <p className="mt-2 text-gray-700">Ingredients:</p>
                  <ul className="list-disc ml-5 text-gray-600">
                    {recipe.ingredients.map((item, i) => <li key={i}>{item}</li>)}
                  </ul>
                </CardContent>
              </Card>
            ))}
          </div>
        </TabsContent>

        <TabsContent value="search">
          <div className="space-y-4">
            <div className="flex items-center gap-2 mb-4">
              <Input
                placeholder="Search recipes..."
                value={search}
                onChange={(e) => setSearch(e.target.value)}
              />
              <Search className="text-pink-500" />
            </div>
            {filteredRecipes.map(recipe => (
              <Card key={recipe.id} className="rounded-2xl shadow-md">
                <CardContent className="p-4">
                  <h2 className="text-xl font-semibold text-pink-700">{recipe.title}</h2>
                  <p className="mt-2 text-gray-700">Ingredients:</p>
                  <ul className="list-disc ml-5 text-gray-600">
                    {recipe.ingredients.map((item, i) => <li key={i}>{item}</li>)}
                  </ul>
                </CardContent>
              </Card>
            ))}
            {filteredRecipes.length === 0 && (
              <p className="text-center text-pink-600">No recipes found 😢</p>
            )}
          </div>
        </TabsContent>

        <TabsContent value="checklist">
          <div className="space-y-4">
            {recipes.map(recipe => (
              <Card key={recipe.id} className="rounded-2xl shadow-md">
                <CardContent className="p-4">
                  <h2 className="text-xl font-semibold text-pink-700 mb-2">{recipe.title}</h2>
                  <ul className="space-y-2">
                    {recipe.steps.map((step, index) => (
                      <li key={index} className="flex items-center gap-2">
                        <input
                          type="checkbox"
                          checked={!!(checkedSteps[recipe.id]?.[index])}
                          onChange={() => handleCheck(recipe.id, index)}
                          className="accent-pink-500 w-5 h-5"
                        />
                        <span className={checkedSteps[recipe.id]?.[index] ? "line-through text-gray-400" : ""}>
                          {step}
                        </span>
                      </li>
                    ))}
                  </ul>
                </CardContent>
              </Card>
            ))}
          </div>
        </TabsContent>
      </Tabs>
    </main>
  );
}

